{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "# A Guide to Living in Shanghai"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Coursera Applied Data Science Specialization \"The Battle of Neighborhoods\" Capstone Project Notebook"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Part 2: Data "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The project uses two datasets, namely ***shanghai_demo*** and ***shanghai_data***.\n",
    "\n",
    "***shanghai_demo*** contains demographic information of all 16 districts (区) in Shanghai. It has 6 variables: _District_, _Population Density_, _Salary_, _Home Price_, _GDP_ and _GDP Per Capita_.\n",
    "\n",
    "In ***shanghai_demo*** dataset, _District_ is a character column. It lists Shanghai's 16 districts. _Population Density_ (person/square kilometer) is density of population in 2017 (data source: [Shanghai Statistical Yearbook 2018](http://www.stats-sh.gov.cn/tjnj/nje18.htm?d1=2018tjnje/E0202.htm)). _Salary_ (RMB/month) stands for personal monthly salary in 2019 (data source: [Sohu](http://www.sohu.com/a/297378775_391502)). _Home Price_ (RMB/square meter) is from the same source ([Sohu](http://www.sohu.com/a/297378775_391502)). _GDP_ (billion RMB) column has district level GDP in 2018 (data source: [Sohu](http://www.sohu.com/a/314957795_612645)). Finally, _GDP Per Capita_ (RMB) (year 2017 data) is sourced from [好金贵财经](https://www.haojingui.com/gdp/5058.html).\n",
    "\n",
    "Note that all data are from different sources and are in different years. This is because it is extremely hard to find one single source that provides related district-level data. This is the most severe fallacy of this project, but this would not affect the results too greatly given that the data would not change too much within 1 to 2 years if the accuracy of data is fully guaranteed. "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Import library\n",
    "import pandas as pd"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>District</th>\n",
       "      <th>Population Density</th>\n",
       "      <th>Salary</th>\n",
       "      <th>Home Price</th>\n",
       "      <th>GDP</th>\n",
       "      <th>GDP PP</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Pudong</td>\n",
       "      <td>4567</td>\n",
       "      <td>8170</td>\n",
       "      <td>48713</td>\n",
       "      <td>1046.009</td>\n",
       "      <td>175448</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>32004</td>\n",
       "      <td>7160</td>\n",
       "      <td>81375</td>\n",
       "      <td>227.030</td>\n",
       "      <td>320701</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Xuhui</td>\n",
       "      <td>19874</td>\n",
       "      <td>7640</td>\n",
       "      <td>71064</td>\n",
       "      <td>167.000</td>\n",
       "      <td>144983</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Changning</td>\n",
       "      <td>18112</td>\n",
       "      <td>8030</td>\n",
       "      <td>68491</td>\n",
       "      <td>142.800</td>\n",
       "      <td>191305</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Jing'an</td>\n",
       "      <td>28910</td>\n",
       "      <td>8380</td>\n",
       "      <td>66228</td>\n",
       "      <td>184.700</td>\n",
       "      <td>159550</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Putuo</td>\n",
       "      <td>23431</td>\n",
       "      <td>7720</td>\n",
       "      <td>55738</td>\n",
       "      <td>100.170</td>\n",
       "      <td>72796</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>Hongkou</td>\n",
       "      <td>34058</td>\n",
       "      <td>7970</td>\n",
       "      <td>58927</td>\n",
       "      <td>83.801</td>\n",
       "      <td>96955</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Yangpu</td>\n",
       "      <td>21627</td>\n",
       "      <td>7220</td>\n",
       "      <td>59443</td>\n",
       "      <td>184.770</td>\n",
       "      <td>130074</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>Minhang</td>\n",
       "      <td>6836</td>\n",
       "      <td>8030</td>\n",
       "      <td>47381</td>\n",
       "      <td>201.360</td>\n",
       "      <td>88089</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Baoshan</td>\n",
       "      <td>7494</td>\n",
       "      <td>7910</td>\n",
       "      <td>38860</td>\n",
       "      <td>139.206</td>\n",
       "      <td>56506</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>Jiading</td>\n",
       "      <td>3408</td>\n",
       "      <td>7350</td>\n",
       "      <td>34425</td>\n",
       "      <td>236.270</td>\n",
       "      <td>136218</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>Jinshan</td>\n",
       "      <td>1367</td>\n",
       "      <td>7360</td>\n",
       "      <td>17850</td>\n",
       "      <td>94.231</td>\n",
       "      <td>121515</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>Songjiang</td>\n",
       "      <td>2892</td>\n",
       "      <td>7670</td>\n",
       "      <td>40546</td>\n",
       "      <td>127.960</td>\n",
       "      <td>63518</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>Qingpu</td>\n",
       "      <td>1799</td>\n",
       "      <td>7400</td>\n",
       "      <td>30578</td>\n",
       "      <td>100.120</td>\n",
       "      <td>83071</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>Fengxian</td>\n",
       "      <td>1681</td>\n",
       "      <td>7530</td>\n",
       "      <td>27555</td>\n",
       "      <td>94.231</td>\n",
       "      <td>66758</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>Chongming</td>\n",
       "      <td>586</td>\n",
       "      <td>5940</td>\n",
       "      <td>25007</td>\n",
       "      <td>34.571</td>\n",
       "      <td>47623</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "     District  Population Density  Salary  Home Price       GDP  GDP PP\n",
       "0      Pudong                4567    8170       48713  1046.009  175448\n",
       "1     Huangpu               32004    7160       81375   227.030  320701\n",
       "2       Xuhui               19874    7640       71064   167.000  144983\n",
       "3   Changning               18112    8030       68491   142.800  191305\n",
       "4     Jing'an               28910    8380       66228   184.700  159550\n",
       "5       Putuo               23431    7720       55738   100.170   72796\n",
       "6     Hongkou               34058    7970       58927    83.801   96955\n",
       "7      Yangpu               21627    7220       59443   184.770  130074\n",
       "8     Minhang                6836    8030       47381   201.360   88089\n",
       "9     Baoshan                7494    7910       38860   139.206   56506\n",
       "10    Jiading                3408    7350       34425   236.270  136218\n",
       "11    Jinshan                1367    7360       17850    94.231  121515\n",
       "12  Songjiang                2892    7670       40546   127.960   63518\n",
       "13     Qingpu                1799    7400       30578   100.120   83071\n",
       "14   Fengxian                1681    7530       27555    94.231   66758\n",
       "15  Chongming                 586    5940       25007    34.571   47623"
      ]
     },
     "execution_count": 3,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Read shanghai_demo dataset\n",
    "shanghai_demo=pd.read_csv(\"C:\\Coursera\\Applied Data Science\\Applied Data Science Capstone\\Shanghai District.csv\")\n",
    "\n",
    "# Print all rows of shanghai_demo\n",
    "shanghai_demo"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "***shanghai_data*** lists prominent neighborhoods in Shanghai (in both English and Chinese) as well as the districts they belong to. It has three variables: _District_, _Neighborhood_ and _Neighborhood Chinese Name_.\n",
    "\n",
    "It is necessary to highlight that there is no such concept as \"neighborhood\" (社区) in Shanghai. \"Neighborhood\" is essentially a \"western\" concept and is not used to indicate the same thing in China. In the country, a \"neighborhood\" is more like a \"residential community\" (小区) that only has residential buildings rather than a large area that has shopping malls, stores, restaurants and attractions (and of course resdential communities). An equivalent concept, in Shanghai, is in fact \"**subdistrict**\" (街道).\n",
    "\n",
    "\"Subdistrict,\" however, is still not entirely the same as \"neighborhood\" in the western world. For instance, [Wujiaochang (五角场)](https://en.wikipedia.org/wiki/Wujiaochang) in Yangpu District is essentially a subdistrict (\"五角场街道\") in [Shanghai's township-level divisions](https://en.wikipedia.org/wiki/List_of_township-level_divisions_of_Shanghai) hierarchy and can be treated as a neighborhood to an extent. In contrast, the famous [Xintiandi (新天地)](https://www.travelchinaguide.com/attraction/shanghai/xin-tian-di.htm), an area full of delicacy, art, decent food and fashion in Huangpu District, is not a subdistrict but can be thought as a neighborhood.\n",
    "\n",
    "Nevertheless, the report adopts the western convention and focuses on a total of 47 neighborhoods (subdistricts/towns) across 16 districts in Shanghai. The author built ***shanghai_data*** based on his own discretion."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Read file\n",
    "shanghai_data=pd.read_excel(\"C:\\Coursera\\Applied Data Science\\Applied Data Science Capstone\\Week 4\\Shanghai Neighborhood.xlsx\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>District</th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Neighborhood Chinese Name</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Pudong</td>\n",
       "      <td>Lujiazui</td>\n",
       "      <td>陆家嘴</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Pudong</td>\n",
       "      <td>Century Park</td>\n",
       "      <td>世纪公园</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Pudong</td>\n",
       "      <td>Zhoujiadu</td>\n",
       "      <td>周家渡</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Pudong</td>\n",
       "      <td>Zhangjiang</td>\n",
       "      <td>张江</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>People's Square</td>\n",
       "      <td>人民广场</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>Huaihai Road</td>\n",
       "      <td>淮海路</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>The Bund</td>\n",
       "      <td>外滩</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>Former French Concession</td>\n",
       "      <td>旧法租界</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>Xintiandi</td>\n",
       "      <td>新天地</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>Dapuqiao</td>\n",
       "      <td>打浦桥</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>Laoximen</td>\n",
       "      <td>老西门</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>Yu Garden</td>\n",
       "      <td>豫园</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>Xuhui</td>\n",
       "      <td>Hengshan Road</td>\n",
       "      <td>衡山路</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>Xuhui</td>\n",
       "      <td>Xujiahui</td>\n",
       "      <td>徐家汇</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>Xuhui</td>\n",
       "      <td>Xietu Road</td>\n",
       "      <td>斜土路</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>Xuhui</td>\n",
       "      <td>Caohejing</td>\n",
       "      <td>漕河泾</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>Xuhui</td>\n",
       "      <td>Longhua</td>\n",
       "      <td>龙华</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>Changning</td>\n",
       "      <td>Gubei</td>\n",
       "      <td>古北</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>Changning</td>\n",
       "      <td>Hongqiao</td>\n",
       "      <td>虹桥</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>Jing'an</td>\n",
       "      <td>Jing'an Temple</td>\n",
       "      <td>静安寺</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20</th>\n",
       "      <td>Jing'an</td>\n",
       "      <td>Shanghai Railway Station</td>\n",
       "      <td>上海火车站</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>Jing'an</td>\n",
       "      <td>Jiangning Road</td>\n",
       "      <td>江宁路</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>22</th>\n",
       "      <td>Putuo</td>\n",
       "      <td>Changshou Road</td>\n",
       "      <td>长寿路</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>Putuo</td>\n",
       "      <td>Caoyang</td>\n",
       "      <td>曹杨</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>Putuo</td>\n",
       "      <td>Zhenru</td>\n",
       "      <td>真如</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25</th>\n",
       "      <td>Putuo</td>\n",
       "      <td>Taopu Xincun</td>\n",
       "      <td>桃浦镇</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26</th>\n",
       "      <td>Putuo</td>\n",
       "      <td>Yichuan Park</td>\n",
       "      <td>宜川路</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>27</th>\n",
       "      <td>Hongkou</td>\n",
       "      <td>Tilanqiao</td>\n",
       "      <td>提篮桥</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>28</th>\n",
       "      <td>Hongkou</td>\n",
       "      <td>Luxun Park</td>\n",
       "      <td>鲁迅公园</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>29</th>\n",
       "      <td>Yangpu</td>\n",
       "      <td>Wujiaochang</td>\n",
       "      <td>五角场</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>30</th>\n",
       "      <td>Yangpu</td>\n",
       "      <td>Dinghai Road</td>\n",
       "      <td>定海路</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>31</th>\n",
       "      <td>Yangpu</td>\n",
       "      <td>Xin Jiangwancheng</td>\n",
       "      <td>新江湾城</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>32</th>\n",
       "      <td>Minhang</td>\n",
       "      <td>Qibao Zhen</td>\n",
       "      <td>七宝</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>33</th>\n",
       "      <td>Minhang</td>\n",
       "      <td>Xinzhuang</td>\n",
       "      <td>莘庄</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>34</th>\n",
       "      <td>Minhang</td>\n",
       "      <td>Zhuanqiao</td>\n",
       "      <td>颛桥</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>35</th>\n",
       "      <td>Minhang</td>\n",
       "      <td>Maqiao</td>\n",
       "      <td>马桥</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>36</th>\n",
       "      <td>Minhang</td>\n",
       "      <td>Jiangchuan Road</td>\n",
       "      <td>江川路</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>37</th>\n",
       "      <td>Baoshan</td>\n",
       "      <td>Youyi Road</td>\n",
       "      <td>友谊路</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>38</th>\n",
       "      <td>Baoshan</td>\n",
       "      <td>Gucun Park</td>\n",
       "      <td>顾村公园</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>39</th>\n",
       "      <td>Jiading</td>\n",
       "      <td>Jiading</td>\n",
       "      <td>嘉定</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>40</th>\n",
       "      <td>Jiading</td>\n",
       "      <td>Anting</td>\n",
       "      <td>安亭</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>41</th>\n",
       "      <td>Jiading</td>\n",
       "      <td>Nanxiang</td>\n",
       "      <td>南翔</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>42</th>\n",
       "      <td>Jinshan</td>\n",
       "      <td>Jinshanwei</td>\n",
       "      <td>金山卫</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>43</th>\n",
       "      <td>Songjiang</td>\n",
       "      <td>Songjiang</td>\n",
       "      <td>松江</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>44</th>\n",
       "      <td>Qingpu</td>\n",
       "      <td>Qingpu</td>\n",
       "      <td>青浦</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>45</th>\n",
       "      <td>Fengxian</td>\n",
       "      <td>Haiwan Zhen</td>\n",
       "      <td>海湾镇</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>46</th>\n",
       "      <td>Chongming</td>\n",
       "      <td>Jianshe Zhen</td>\n",
       "      <td>建设镇</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "     District              Neighborhood Neighborhood Chinese Name\n",
       "0      Pudong                  Lujiazui                       陆家嘴\n",
       "1      Pudong              Century Park                      世纪公园\n",
       "2      Pudong                 Zhoujiadu                       周家渡\n",
       "3      Pudong                Zhangjiang                        张江\n",
       "4     Huangpu           People's Square                      人民广场\n",
       "5     Huangpu              Huaihai Road                       淮海路\n",
       "6     Huangpu                  The Bund                        外滩\n",
       "7     Huangpu  Former French Concession                      旧法租界\n",
       "8     Huangpu                 Xintiandi                       新天地\n",
       "9     Huangpu                  Dapuqiao                       打浦桥\n",
       "10    Huangpu                  Laoximen                       老西门\n",
       "11    Huangpu                 Yu Garden                        豫园\n",
       "12      Xuhui             Hengshan Road                       衡山路\n",
       "13      Xuhui                  Xujiahui                       徐家汇\n",
       "14      Xuhui                Xietu Road                       斜土路\n",
       "15      Xuhui                 Caohejing                       漕河泾\n",
       "16      Xuhui                   Longhua                        龙华\n",
       "17  Changning                     Gubei                        古北\n",
       "18  Changning                  Hongqiao                        虹桥\n",
       "19    Jing'an            Jing'an Temple                       静安寺\n",
       "20    Jing'an  Shanghai Railway Station                     上海火车站\n",
       "21    Jing'an            Jiangning Road                       江宁路\n",
       "22      Putuo            Changshou Road                       长寿路\n",
       "23      Putuo                   Caoyang                        曹杨\n",
       "24      Putuo                    Zhenru                        真如\n",
       "25      Putuo              Taopu Xincun                       桃浦镇\n",
       "26      Putuo              Yichuan Park                       宜川路\n",
       "27    Hongkou                 Tilanqiao                       提篮桥\n",
       "28    Hongkou                Luxun Park                      鲁迅公园\n",
       "29     Yangpu               Wujiaochang                       五角场\n",
       "30     Yangpu              Dinghai Road                       定海路\n",
       "31     Yangpu         Xin Jiangwancheng                      新江湾城\n",
       "32    Minhang                Qibao Zhen                        七宝\n",
       "33    Minhang                 Xinzhuang                        莘庄\n",
       "34    Minhang                 Zhuanqiao                        颛桥\n",
       "35    Minhang                    Maqiao                        马桥\n",
       "36    Minhang           Jiangchuan Road                       江川路\n",
       "37    Baoshan                Youyi Road                       友谊路\n",
       "38    Baoshan                Gucun Park                      顾村公园\n",
       "39    Jiading                   Jiading                        嘉定\n",
       "40    Jiading                    Anting                        安亭\n",
       "41    Jiading                  Nanxiang                        南翔\n",
       "42    Jinshan                Jinshanwei                       金山卫\n",
       "43  Songjiang                 Songjiang                        松江\n",
       "44     Qingpu                    Qingpu                        青浦\n",
       "45   Fengxian               Haiwan Zhen                       海湾镇\n",
       "46  Chongming              Jianshe Zhen                       建设镇"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# Print all rows of shanghai_data\n",
    "shanghai_data"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "***shanghai_data*** does not have longitude/latitude information for each neighborhood. Thus, further manipulation is conducted."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [],
   "source": [
    "# Read libraries\n",
    "import geopy\n",
    "from geopy.geocoders import Nominatim\n",
    "\n",
    "geolocator=Nominatim(user_agent=\"shanghai_explorer\")\n",
    "\n",
    "# Attach string ', Shanghai' to Neighborhood column\n",
    "shanghai_data['Neighborhood']=shanghai_data['Neighborhood']+', Shanghai'\n",
    "# This is for the location precesion concern\n",
    "\n",
    "# Get coordinates\n",
    "shanghai_data['Coordinates']=shanghai_data['Neighborhood'].apply(geolocator.geocode).apply(lambda x: (x.latitude, x.longitude))\n",
    "\n",
    "# Seperate Coordinates column into latitude and longitude columns\n",
    "shanghai_data[['Latitude','Longitude']]=shanghai_data['Coordinates'].apply(pd.Series)\n",
    "\n",
    "# Drop Coordinates column\n",
    "shanghai_data.drop(['Coordinates'],axis=1,inplace=True)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Now ***shanghai_data*** has geographic information included:"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>District</th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Neighborhood Chinese Name</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Pudong</td>\n",
       "      <td>Lujiazui, Shanghai</td>\n",
       "      <td>陆家嘴</td>\n",
       "      <td>31.240168</td>\n",
       "      <td>121.497945</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Pudong</td>\n",
       "      <td>Century Park, Shanghai</td>\n",
       "      <td>世纪公园</td>\n",
       "      <td>31.218700</td>\n",
       "      <td>121.554338</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Pudong</td>\n",
       "      <td>Zhoujiadu, Shanghai</td>\n",
       "      <td>周家渡</td>\n",
       "      <td>31.187146</td>\n",
       "      <td>121.489237</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Pudong</td>\n",
       "      <td>Zhangjiang, Shanghai</td>\n",
       "      <td>张江</td>\n",
       "      <td>31.207347</td>\n",
       "      <td>121.610182</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>People's Square, Shanghai</td>\n",
       "      <td>人民广场</td>\n",
       "      <td>31.231926</td>\n",
       "      <td>121.471535</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>Huaihai Road, Shanghai</td>\n",
       "      <td>淮海路</td>\n",
       "      <td>31.220936</td>\n",
       "      <td>121.467353</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>The Bund, Shanghai</td>\n",
       "      <td>外滩</td>\n",
       "      <td>31.234038</td>\n",
       "      <td>121.488921</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>Former French Concession, Shanghai</td>\n",
       "      <td>旧法租界</td>\n",
       "      <td>31.211806</td>\n",
       "      <td>121.464982</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>Xintiandi, Shanghai</td>\n",
       "      <td>新天地</td>\n",
       "      <td>31.217936</td>\n",
       "      <td>121.469819</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Huangpu</td>\n",
       "      <td>Dapuqiao, Shanghai</td>\n",
       "      <td>打浦桥</td>\n",
       "      <td>31.208286</td>\n",
       "      <td>121.463941</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "  District                        Neighborhood Neighborhood Chinese Name  \\\n",
       "0   Pudong                  Lujiazui, Shanghai                       陆家嘴   \n",
       "1   Pudong              Century Park, Shanghai                      世纪公园   \n",
       "2   Pudong                 Zhoujiadu, Shanghai                       周家渡   \n",
       "3   Pudong                Zhangjiang, Shanghai                        张江   \n",
       "4  Huangpu           People's Square, Shanghai                      人民广场   \n",
       "5  Huangpu              Huaihai Road, Shanghai                       淮海路   \n",
       "6  Huangpu                  The Bund, Shanghai                        外滩   \n",
       "7  Huangpu  Former French Concession, Shanghai                      旧法租界   \n",
       "8  Huangpu                 Xintiandi, Shanghai                       新天地   \n",
       "9  Huangpu                  Dapuqiao, Shanghai                       打浦桥   \n",
       "\n",
       "    Latitude   Longitude  \n",
       "0  31.240168  121.497945  \n",
       "1  31.218700  121.554338  \n",
       "2  31.187146  121.489237  \n",
       "3  31.207347  121.610182  \n",
       "4  31.231926  121.471535  \n",
       "5  31.220936  121.467353  \n",
       "6  31.234038  121.488921  \n",
       "7  31.211806  121.464982  \n",
       "8  31.217936  121.469819  \n",
       "9  31.208286  121.463941  "
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "shanghai_data.head(10)"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python",
   "language": "python",
   "name": "conda-env-python-py"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.6.10"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
